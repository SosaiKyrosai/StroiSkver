{% extends 'core/base.html' %}
{% load static %}

{% block title %}
Стройматериалы
{% endblock %}

{% block content %}
<style>
.product-details-container {
  width: 80%;
  margin: 0 auto;
  display: flex;
}

.product-details-left {
  flex: 1;
}

.product-details-right {
  flex: 1;
  margin-left: 20px;
  display: flex;
  flex-direction: column;
}

.product-details-right img {
  width: 100%;
}

.product-actions {
  display: flex;
  flex-direction: column;
  margin-top: 20px;
}

.wishlist-button {
  align-self: flex-end;
  margin-bottom: 10px;
}

.cart-button {
  align-self: flex-start;
  margin-left: 20px;
}

.product-details-right p {
  text-align: left;
  padding-left: 20px;
}
  .custom-row {
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
  }
</style>
<a onclick="goBack()" href="#" class="btn btn-secondary" style="background-color: #8a3e86; margin-bottom: 20px;">
    <span class="arrow">&larr;</span> Назад
</a>

<script>
function goBack() {
  window.history.back();
}
</script>

<div class="product-details-container">
  <div class="product-details-left">
    <img style="width: 100%;" src="{{ product.image.url }}" class="card-img-top imageproduct" alt="{{ product.name }}">
  </div>
  <div class="product-details-right">
    <h1>{{ product.name }}</h1>
    <div class="product-actions">
      <button class="btn btn-secondary wishlist-button">
        <i class="far fa-heart"></i> Добавить в избранное
      </button>
    </div>
    <p style="margin-top: 20px;">Описание: {{ product.description }}</p>
    <p>Цена: {{ product.price }} ₽</p>
    <form action="{% url 'add_to_cart' product.id %}" method="POST">
      {% csrf_token %}
      <button style="background-color: #8a3e86; border: none;" type="submit" class="btn btn-primary cart-button">
        <i class="fas fa-shopping-cart"></i> Добавить в корзину
      </button>
    </form>
  </div>
</div>

{% if messages %}
<div id="notification-container">
  {% for message in messages %}
  <div class="notification alert alert-success">{{ message }}</div>
  {% endfor %}
</div>
{% endif %}

<script>
  // Задержка перед скрытием сообщения (в миллисекундах)
  const delay = 3000;

  // Получаем контейнер уведомлений
  const notificationContainer = document.getElementById('notification-container');

  // Проверяем, есть ли контейнер уведомлений
  if (notificationContainer) {
    // Получаем все уведомления
    const notifications = notificationContainer.getElementsByClassName('notification');

    // Проходимся по каждому уведомлению
    Array.from(notifications).forEach(notification => {
      // Запускаем таймер для скрытия уведомления
      setTimeout(() => {
        // Скрываем уведомление
        notification.style.display = 'none';
      }, delay);
    });
  }
</script>

<style>
  /* Стили для уведомлений */
  #notification-container {
    position: fixed;
    top: 5%; /* Выравнивание по вертикали */
    left: 50%; /* Выравнивание по горизонтали */
    transform: translate(-50%, -50%); /* Центрирование */
    width: 500px;
    max-width: 100%;
    z-index: 9999;
  }

  .notification {
    background-color: #d4edda; /* Цвет фона */
    color: #155724; /* Цвет текста */
    border-color: #c3e6cb; /* Цвет границы */
    padding: 10px;
    margin-bottom: 10px;
  }
</style>



{% endblock %}
